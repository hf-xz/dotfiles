### tmux config ###

set -g default-terminal "xterm-256color"
set -g default-shell /opt/homebrew/bin/fish

# 默认路径
bind c new-window

# 开启鼠标
set-option -g mouse on

# 设置复制到系统剪切板
unbind -n -Tcopy-mode-vi MouseDragEnd1Pane
bind -Tcopy-mode-vi MouseDragEnd1Pane send -X copy-selection-and-cancel\; run "tmux save-buffer - | pbcopy -i -sel clipboard > /dev/null"
# Linux 用 xclip
# bind -Tcopy-mode-vi MouseDragEnd1Pane send -X copy-selection-and-cancel\; run "tmux save-buffer - | xclip -i -sel clipboard > /dev/null"

setw -g mode-keys vi                # 复制模式使用 vi 键位

set -g status-interval      1       # 状态栏刷新时间
set -g status-justify       left    # 状态栏列表左对齐
setw -g monitor-activity    off     # 非当前窗口有内容更新时在状态栏通知

set -g renumber-windows     on      # 关掉某个窗口后，编号重排
set-option -g allow-rename  off     # 禁止自动重命名窗口

# 分屏快捷键
bind-key '\' split-window -h -c "#{pane_current_path}" # 水平分屏
bind-key '-' split-window -v -c "#{pane_current_path}" # 垂直分屏

# 切换panes同步
bind-key S setw synchronize-panes

# 绑定刷新配置快捷键
bind-key r source-file ~/.config/tmux/tmux.conf \; display-message "Config reloading..."

# C-p 进入命令模式
bind-key C-p command-prompt

# 切换 window
bind -n M-H previous-window
bind -n M-L next-window

# 状态栏位置
set-option -g status-position bottom

# 状态栏样式
# palettes.catppuccin_mocha
set -g @color_rosewater "#f5e0dc"
set -g @color_flamingo "#f2cdcd"
set -g @color_pink "#f5c2e7"
set -g @color_mauve "#cba6f7"
set -g @color_red "#f38ba8"
set -g @color_maroon "#eba0ac"
set -g @color_peach "#fab387"
set -g @color_yellow "#f9e2af"
set -g @color_green "#a6e3a1"
set -g @color_teal "#94e2d5"
set -g @color_sky "#89dceb"
set -g @color_sapphire "#74c7ec"
set -g @color_blue "#89b4fa"
set -g @color_lavender "#b4befe"
set -g @color_text "#cdd6f4"
set -g @color_subtext1 "#bac2de"
set -g @color_subtext0 "#a6adc8"
set -g @color_overlay2 "#9399b2"
set -g @color_overlay1 "#7f849c"
set -g @color_overlay0 "#6c7086"
set -g @color_surface2 "#585b70"
set -g @color_surface1 "#45475a"
set -g @color_surface0 "#313244"
set -g @color_base "#1e1e2e"
set -g @color_mantle "#181825"
set -g @color_crust "#11111b"


set -g status on
set -g status-style "fg=#{@color_crust},bg=default"
set -g status-left "\
#[fg=#{@color_yellow}] #S"
set -g status-right "\
#[fg=#{@color_peach},bg=#{@color_surface0}]\
#[fg=#{@color_crust},bg=#{@color_peach}] \
#[fg=#{@color_peach},bg=#{@color_surface0}]▌\
#[fg=#{@color_text},bg=#{@color_surface0}] %H:%M:%S\
#[fg=#{@color_surface0},bg=#{@color_base}]"

#[fg=#{@color_yellow},bg=#{@color_base}]\
#[fg=#{@color_crust},bg=#{@color_yellow}] \
#[fg=#{@color_yellow},bg=#{@color_surface0}]▌\
#[fg=#{@color_text},bg=#{@color_surface0}] #(hostname) \

# 状态栏窗口样式
set -wg window-status-format "\
#[fg=#{@color_overlay0},bg=#{@color_base}]\
#[fg=#{@color_crust},bg=#{@color_overlay0}]#I \
#[fg=#{@color_text},bg=#{@color_surface0}] #W\
#[fg=#{@color_surface0},bg=#{@color_base}]"

# 激活窗口样式
set -wg window-status-current-format "\
#[fg=#{@color_green},bg=#{@color_base}]\
#[fg=#{@color_crust},bg=#{@color_green}]#I \
#[fg=#{@color_text},bg=#{@color_surface1}] #W\
#[fg=#{@color_surface1},bg=#{@color_base}]"

set -g status-justify centre # left centre right
set -wg window-status-separator " "
